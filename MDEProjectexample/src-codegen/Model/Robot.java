// --------------------------------------------------------
// Code generated by Papyrus Java
// --------------------------------------------------------

package Model;


import Model.IMission;
import Model.IRobot;
import Model.State;
import Model.Strategy;
import project.AbstractRobotSimulator;
import project.Point;
import project.RobotAvatar;

import java.lang.String;
import java.util.ArrayList;
import java.util.List;

import Controller.Monitor;
import Controller.Observer;

/************************************************************/
/**
 * 
 */
public class Robot implements IRobot,Observable {
	/**
	 * 
	 */
	private String name;
	
	private Monitor monitor; //Bad coding, but necessary solution to find current position of RobotAvatar....
	
	/**
	 * 
	 */
	private Point position;
	
	/**
	 * 
	 */
	private Strategy strategy;
	
	/**
	 * 
	 */
	private State state;
	
	/**
	 * 
	 */
	private IMission mission;
	
	/**
	 * 
	 */
	private List<Observer> observers;
	
	/**
	 * 
	 */
	private int totalReward;

	
	public Robot(String name, Point position, Strategy strategy, State state, IMission mission, Monitor monitor) {
		this.name = name;
		this.position = position;
		this.strategy = strategy;
		this.state = state;
		this.mission = mission;
		this.monitor = monitor;
		this.observers = new ArrayList<>();
	}

	/**
	 * 
	 * @return 
	 */
	public boolean isAtPosition(Point point) {
		return monitor.isAtPosition(this, point);
		
	}

	/**
	 * 
	 * @return 
	 */
	public Strategy getStrategy() {
		return this.strategy;
	}

	/**
	 * 
	 */
	private void move() {
	}

	/**
	 * 
	 * @return 
	 */
	public String getState() {
		return this.state.toString();
	}

	/**
	 * 
	 * @return 
	 */
	public IMission getMission() {
		return this.mission;
	}

	/**
	 * 
	 * @param mission 
	 */
	public void setMission(IMission mission) {
		this.mission = mission;
		notifyAllObservers();
	}

	/**
	 * 
	 * @param strategy 
	 */
	public void setStrategy(Strategy strategy) {
		this.strategy = strategy;
		notifyAllObservers();
	}

	/**
	 * 
	 * @param position 
	 */
	public void setPosition(Point position) {
		this.position = position;
		notifyAllObservers();
	}

	/**
	 * 
	 */
	public void notifyAllObservers() {
		
		for(Observer observer :observers) {
			observer.update(this);
			
		}
	}

	/**
	 * 
	 * @param observer 
	 */
	public void attach(Observer observer) {
		observers.add(observer);
	}


	@Override
	public void addReward(int reward) {
		this.totalReward += reward;
		
	}
	
	/**
	 * 
	 * @return 
	 */
	public Strategy useStrategy() {
		return null;
	}
	
	public void setState(State state) {
		this.state = state;
	}

	@Override
	public Point getPosition() {
		// TODO Auto-generated method stub
		return position;
	}

	@Override
	public RobotAvatar getRobot() { //bad coding but necessary
		return monitor.getRobotAvatar(this);
	}

	@Override
	public String getName() {
		// TODO Auto-generated method stub
		return null;
	}

};
